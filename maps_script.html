<!DOCTYPE html>
<html>

<head>
    <title>D-Maps</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon"
    href=".\Images\logo.jpg"
    type="logo/jpg">
    <link rel="stylesheet" href="main.css">
    <link rel="stylesheet" href="footer.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link href="../Jquery/jquery.multiselect.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="data.js"></script>
    <script src="graph.js"></script>
    <link href='https://fonts.googleapis.com/css?family=Quicksand'>
    <script src="routing.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests"> 
</head>

<body>
    <div>
    <div id="uppr" class="container" class="row">
      <div    class=" col-md-6 ">
        <label for="From" >From:
        <select name="Places" id="Places" class="elemnum">
            <option value="" disabled selected hidden>Enter Your Current Location...</option>
          <option value="0">TnP</option>
          <option value="1">OAT</option>
          <option value="2">BR Audi</option>
          <option value="3">Mic Mac</option>
          <option value="4">Library</option>
          <option value="5">Academic Section</option>
          <option value="6">Administration Block</option>
          <option value="7">Nescafe</option>
          <option value="8">Computer Center</option>
          <option value="10">SPS 18</option>
          <option value="11">Applied Chemistry</option>
          <option value="12">Maths Department</option>
          <option value="13">Central Work</option>
          <option value="14">Department of Bio</option>
          <option value="15">Mechanical Department</option>
          <option value="16">Mech C</option>
          <option value="17">Hpmc Juice</option>
          <option value="18">sps 9-12</option>
          <option value="19">Type 4 Faculty</option>
          <option value="20">Hotriculture Department</option>
          <option value="21">CS Department</option>
          <option value="22">EE Department</option>
          <option value="23">Civil Department</option>
        </select>
        </label>
      </div>
        <div    class="col-md-6">
        <span id="to">
         <label for="To" >To:
        <select name="Places" id="Places1" class="elemnum">
        <option value="" disabled selected hidden>Enter Your Destination...</option>
           <option value="0">TnP</option>
          <option value="1">OAT</option>
          <option value="2">BR Audi</option>
          <option value="3">Mic Mac</option>
          <option value="4">Library</option>
          <option value="5">Academic Section</option>
          <option value="6">Administration Block</option>
          <option value="7">Nescafe</option>
          <option value="8">Computer Center</option>
          <option value="10">SPS 18</option>
          <option value="11">Applied Chemistry</option>
          <option value="12">Maths Department</option>
          <option value="13">Central Work</option>
          <option value="14">Department of Bio</option>
          <option value="15">Mechanical Department</option>
          <option value="16">Mech C</option>
          <option value="17">Hpmc Juice</option>
          <option value="18">sps 9-12</option>
          <option value="19">Type 4 Faculty</option>
          <option value="20">Hotriculture Department</option>
          <option value="21">CS Department</option>
          <option value="22">EE Department</option>
          <option value="23">Civil Department</option>
        </select>
        </label>
    </span>
    </div>
    </div>
         <br>
          <br>
    <div class="container" class="row">
        <div class="col-md-4">
        </div>
        <div class="col-md-2">
      <a href="#map"><input id = "getRoute" type="submit" value="Submit" ></a>
  </div>
      <div class="col-md-6">
        </div>
   </div>
   
  
     
    
</div>
<div class="container" class="row">
        <div class="col-md-4">
        </div>
        <div class="col-md-2">
       <button onclick="window.location.reload()" id="getRoute">Clear</button>
  </div>
      <div class="col-md-6">
        </div>
   </div>
    
   
    <div id="map"></div>
    <br>
    
     <h1 id="dist"><i class="fa fa-map-marker" aria-hidden="true"></i> Distance =>  <span id="distance"></span></h1>
    <footer class="ftco-footer ftco-section" style="font-family: 'Quicksand';">
        <div class="container">
          <div class="row mb-5">
            <div class="col-md">
              <div class="ftco-footer-widget mb-4">
                <h2 class="ftco-heading-2">Traveller</h2>
                <p>
                    Woried Of Walking Across The Giant Campus or
                    Struck between the two paths and can't decide which is more shorter or
                    Wanna Explore More Your Campus, You have Come to the Right Place.This is the complete Guide for all Your Journeys.</p>
              </div>
            </div>
            <div class="col-md">
              <div class="ftco-footer-widget mb-4 ml-md-4" style="padding-left:100px ">
                <h2 class="ftco-heading-2">Connect With Our Team via</h2>
                <ul class="list-unstyled">
                  <li style="font-size: 17px; color: whitesmoke; font-weight: 500;"><a href="https://www.linkedin.com/in/jayant-jethi-492312197/"><span class="icon-long-arrow-right mr-2"></span><i class="fa fa-linkedin-square" aria-hidden="true" style="font-size:20px;color: white;"></i>- Jayant Jethi</a></li>
                  <br>
                  <li style="font-size: 17px; color: whitesmoke; font-weight: 500;"><a href="https://www.linkedin.com/in/himanshu-jindal-199332a0/"><span class="icon-long-arrow-right mr-2"></span><i class="fa fa-linkedin-square" aria-hidden="true" style="font-size:20px;color: white;"></i>- Himanshu Jindal</a></li>
                  <br>
                  <li style="font-size: 17px; color: whitesmoke; font-weight: 500;"><a href="https://www.linkedin.com/in/jayant-prakash-21b595192"><span class="icon-long-arrow-right mr-2"></span><i class="fa fa-linkedin-square" aria-hidden="true" style="font-size:20px;color: white;"></i>- Jayant Prakash</a></li>
                </ul>
              </div>
            </div>
            <div class="col-md">
              <div class="ftco-footer-widget mb-4">
                <h2 class="ftco-heading-3">Query?</h2>
                <div class="block-23 mb-3">
                  <ul>
                    <!-- <li><span class="icon icon-map-marker"></span><span class="text">
                                        </span></li> -->
                    <li><a href="https://www.truecaller.com"><span class="icon icon-phone"></span><span class="text"><i class="fa fa-phone"
                            aria-hidden="true"></i> 8076331262 <br><i class="fa fa-phone" aria-hidden="true"></i>9068880466
                          <br><i class="fa fa-phone" aria-hidden="true"></i> 9756201934</span></a></li>
                    <li><a href="https://mail.google.com/mail/u/0/#inbox?compose=new"><span class="icon icon-envelope">
                          </i></span><span class="text"><i class="fa fa-envelope-open-o" aria-hidden="true"></i>
                          jayant.jethi8@gmail.com</span></a></li>
                    <li><a href="https://mail.google.com/mail/u/0/#inbox?compose=new"><span
                          class="icon icon-envelope"></span><span class="text"><i class="fa fa-envelope-open-o"
                            aria-hidden="true"></i>
                          jindalh2@gmail.com</span></a></li>
                    <li><a href="https://mail.google.com/mail/u/0/#inbox?compose=new"><span
                          class="icon icon-envelope"></span><span class="text"><i class="fa fa-envelope-open-o"
                            aria-hidden="true"></i>
                          jayant21prakash@gmail.com</span></a></li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
          <p class="posn">This website has been designed & developed with &#10084;</p>
    
          <!-- <p class="aligncenter">
                <img src="images/banner.png" alt="developers" />
            </p> -->
          <div class="row">
            <div class="col-md-12 text-center">
    
              <p>
                <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
                Copyright &copy;
                <script>document.write(new Date().getFullYear());</script> All rights reserved
                <!-- This template is made with <i class="icon-heart color-danger" aria-hidden="true"></i> by <a href="https://colorlib.com" target="_blank">Colorlib</a>-->
                <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
              </p>
            </div>
          </div>
      </footer>
</div>


    <script async defer
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBO7_gerSNEefHH1ORHxeAc77D31C6PtsI&libraries=drawing&callback=initMap">
        </script>
    <script>
        var customLabel = {
            terminal: {
                label: 'T'
            }
        };
        // var location = {lat : 28.75023 , lng: 77.11798};

        var airport = { lat: 28.75023, lng: 77.11798};

        var Path; // Polyline
        var map;
        function initMap() {
            map = new google.maps.Map(document.getElementById('map'), {
                zoom: 17.9,
                center: airport,
                // mapTypeId: 'terrain'
            });
    var tnp = {lat : 28.7501922 , lng: 77.1171972};
    var oat = {lat : 28.7498520 , lng: 77.1176061};
    var braudi = {lat : 28.7502522 , lng: 77.1164258};
    var micmac = {lat : 28.7512523 , lng: 77.1166547};
    var library = {lat : 28.7506316 , lng: 77.1165213};
    var academicsection = {lat : 28.7498965 , lng: 77.1163321};
    var administartionblock = {lat : 28.7498178 , lng: 77.1161273};
    var nescafe = {lat : 28.7496703 , lng: 77.1166897};
    var computercenter = {lat : 28.7503122 , lng: 77.1173276};
    var sps18 = {lat : 28.7517372 , lng: 77.1185804};
    var appliedchem = {lat :  28.751480297771664 , lng: 77.11799594872775};
    var mathsdepartmnt = {lat : 28.7509366 , lng: 77.1180136};
    var centeralwork = {lat : 28.7508988 , lng: 77.1185126};
    var departmntofbio = {lat : 28.7501350 , lng: 77.1183965};
    var mechanicldepartmnt = {lat : 28.7499837 , lng: 77.1186109};
    var maxi = {lat : 28.7492961 , lng: 77.1187878};
    var hpmcjuice = {lat : 28.7492993 , lng: 77.1184327};
    var sps912 = {lat : 28.7494183 , lng: 77.1200866};
    var type4faculty = {lat : 28.7493813 , lng: 77.1221970};
    var horiculturedepartmnt = {lat : 28.7508977 , lng: 77.1200012};
    var csdepartmnt = {lat : 28.7486985 , lng: 77.1175206};
    var eedepartmnt = {lat : 28.7488063 , lng: 77.1169404};
    var civildepartmnt = {lat : 28.7489273 , lng: 77.1179943};

    const svgMarker = {
        path:
          "M10.453 14.016l6.563-6.609-1.406-1.406-5.156 5.203-2.063-2.109-1.406 1.406zM12 2.016q2.906 0 4.945 2.039t2.039 4.945q0 1.453-0.727 3.328t-1.758 3.516-2.039 3.070-1.711 2.273l-0.75 0.797q-0.281-0.328-0.75-0.867t-1.688-2.156-2.133-3.141-1.664-3.445-0.75-3.375q0-2.906 2.039-4.945t4.945-2.039z",
        fillColor: "red",
        fillOpacity: 2.0,
        strokeWeight: 1.0,
        rotation: 0,
        scale: 2,
        anchor: new google.maps.Point(12, 20),
      };
      const svgMarker2 = {
        path:
          "M10.453 14.016l6.563-6.609-1.406-1.406-5.156 5.203-2.063-2.109-1.406 1.406zM12 2.016q2.906 0 4.945 2.039t2.039 4.945q0 1.453-0.727 3.328t-1.758 3.516-2.039 3.070-1.711 2.273l-0.75 0.797q-0.281-0.328-0.75-0.867t-1.688-2.156-2.133-3.141-1.664-3.445-0.75-3.375q0-2.906 2.039-4.945t4.945-2.039z",
        fillColor: "red",
        fillOpacity: 2.0,
        strokeWeight: 1.0,
        rotation: 0,
        scale: 2,
        anchor: new google.maps.Point(5, 20),
      };
      const svgMarker3 = {
        path:
          "M10.453 14.016l6.563-6.609-1.406-1.406-5.156 5.203-2.063-2.109-1.406 1.406zM12 2.016q2.906 0 4.945 2.039t2.039 4.945q0 1.453-0.727 3.328t-1.758 3.516-2.039 3.070-1.711 2.273l-0.75 0.797q-0.281-0.328-0.75-0.867t-1.688-2.156-2.133-3.141-1.664-3.445-0.75-3.375q0-2.906 2.039-4.945t4.945-2.039z",
        fillColor: "red",
        fillOpacity: 2.0,
        strokeWeight: 1.0,
        rotation: 0,
        scale: 2,
        anchor: new google.maps.Point(23, 29),
      };
      const svgMarker4 = {
        path:
          "M10.453 14.016l6.563-6.609-1.406-1.406-5.156 5.203-2.063-2.109-1.406 1.406zM12 2.016q2.906 0 4.945 2.039t2.039 4.945q0 1.453-0.727 3.328t-1.758 3.516-2.039 3.070-1.711 2.273l-0.75 0.797q-0.281-0.328-0.75-0.867t-1.688-2.156-2.133-3.141-1.664-3.445-0.75-3.375q0-2.906 2.039-4.945t4.945-2.039z",
        fillColor: "red",
        fillOpacity: 2.0,
        strokeWeight: 1.0,
        rotation: 0,
        scale: 2,
        anchor: new google.maps.Point(17, 15),
      };
      const svgMarker5 = {
        path:
          "M10.453 14.016l6.563-6.609-1.406-1.406-5.156 5.203-2.063-2.109-1.406 1.406zM12 2.016q2.906 0 4.945 2.039t2.039 4.945q0 1.453-0.727 3.328t-1.758 3.516-2.039 3.070-1.711 2.273l-0.75 0.797q-0.281-0.328-0.75-0.867t-1.688-2.156-2.133-3.141-1.664-3.445-0.75-3.375q0-2.906 2.039-4.945t4.945-2.039z",
        fillColor: "red",
        fillOpacity: 2.0,
        strokeWeight: 1.0,
        rotation: 0,
        scale: 2,
        anchor: new google.maps.Point(1, 12),
      };
      const svgMarker6 = {
        path:
          "M10.453 14.016l6.563-6.609-1.406-1.406-5.156 5.203-2.063-2.109-1.406 1.406zM12 2.016q2.906 0 4.945 2.039t2.039 4.945q0 1.453-0.727 3.328t-1.758 3.516-2.039 3.070-1.711 2.273l-0.75 0.797q-0.281-0.328-0.75-0.867t-1.688-2.156-2.133-3.141-1.664-3.445-0.75-3.375q0-2.906 2.039-4.945t4.945-2.039z",
        fillColor: "red",
        fillOpacity: 2.0,
        strokeWeight: 1.0,
        rotation: 0,
        scale: 2,
        anchor: new google.maps.Point(11, 25),
      };
      const svgMarker7 = {
        path:
          "M10.453 14.016l6.563-6.609-1.406-1.406-5.156 5.203-2.063-2.109-1.406 1.406zM12 2.016q2.906 0 4.945 2.039t2.039 4.945q0 1.453-0.727 3.328t-1.758 3.516-2.039 3.070-1.711 2.273l-0.75 0.797q-0.281-0.328-0.75-0.867t-1.688-2.156-2.133-3.141-1.664-3.445-0.75-3.375q0-2.906 2.039-4.945t4.945-2.039z",
        fillColor: "red",
        fillOpacity: 2.0,
        strokeWeight: 1.0,
        rotation: 0,
        scale: 2,
        anchor: new google.maps.Point(7, 18),
      };
    new google.maps.Marker({
    position: tnp,
    icon: svgMarker,
map,
title: "TNP",
});
new google.maps.Marker({
    position: oat,
    icon: svgMarker,
map,
title: "OAT",
});
new google.maps.Marker({
    position: braudi,
    icon: svgMarker,

map,
title: "BR AUDI",
});
new google.maps.Marker({
    position: micmac,
    icon: svgMarker,

map,
title: "MIC-MAC",
});
new google.maps.Marker({
    position: library,
    icon: svgMarker,

map,
title: "LIBRARY",
});
new google.maps.Marker({
    position: academicsection,
    icon: svgMarker,

map,
title: "ACADEMIC-SECTION",
});
new google.maps.Marker({
    position: administartionblock,
    icon: svgMarker5,

map,
title: "ADMINISTARTION-BLOCK",
});
new google.maps.Marker({
    position: nescafe,
    icon: svgMarker,

map,
title: "NESCAFE",
});
new google.maps.Marker({
    position: computercenter,
    icon: svgMarker,

map,
title: "COMPUTER CENTER",
});

new google.maps.Marker({
    position: sps18,
    icon: svgMarker4,

map,
title: "SPS 1-8",
});
new google.maps.Marker({
    position: appliedchem,
    icon: svgMarker7,

map,
title: "APPLIED CHEMISTRY",
});
new google.maps.Marker({
    position: mathsdepartmnt,
    icon: svgMarker,

map,
title: "MATHS DEPARTMENT",
});
new google.maps.Marker({
    position: centeralwork,
    icon: svgMarker,

map,
title: "CENTRAL WORKSHOP",
});
new google.maps.Marker({
    position: departmntofbio,
    icon: svgMarker,

map,
title: "DEPARTMENT OF BIO",
});
new google.maps.Marker({
    position: mechanicldepartmnt,
    icon: svgMarker,

map,
title: "MECHANICAL DEPARTMENT",
});
new google.maps.Marker({
    position: maxi,
    icon: svgMarker,
    
map,
title: "MECH-C",
});
new google.maps.Marker({
    position: hpmcjuice,
    icon: svgMarker,

map,
title: "HPMC-JUICE",
});
new google.maps.Marker({
    position: sps912,
    icon: svgMarker2,

map,
title: "SPS 9-12",
});
new google.maps.Marker({
    position: type4faculty,
    icon: svgMarker3,

map,
title: "TYPE-4 FACULTY",
});
new google.maps.Marker({
    position: horiculturedepartmnt,
    icon: svgMarker,
    map,
title: "HORICULTURE DEPARTMENT",
});
new google.maps.Marker({
    position: csdepartmnt,
    icon: svgMarker6,

map,
title: "CS-DEPARTMENT",
});
new google.maps.Marker({
    position: eedepartmnt,
    icon: svgMarker,

map,
title: "EE-DEPARTMENT",
});
new google.maps.Marker({
    position: civildepartmnt,
    icon: svgMarker,
    
map,
title: "CIVIL-DEPARTMENT",
});

            map.data.loadGeoJson(data);

            // This section downloads the xml data generated and outputs the terminal T symbol on the marker

            downloadUrl('../PHP/sql_to_xml.php', function (xml_data) {
                var xml = xml_data.responseXML;
                var markers = xml.documentElement.getElementsByTagName('marker');
                Array.prototype.forEach.call(markers, function (markerElem) {
                    var id = markerElem.getAttribute('id');
                    var type = "terminal";
                    var point = new google.maps.LatLng(
                        parseFloat(markerElem.getAttribute('lat')),
                        parseFloat(markerElem.getAttribute('lng'))
                    );


                    var icon = customLabel[type] || {};
                    var marker = new google.maps.Marker({
                        map: map,
                        position: point,
                        label: icon.label,
                    });
                });

                for (var i = 0; i < data.features.length; i++) {  // Need to find a better way to compare if the T marker is placed already
                    var token = false;

                    var coords = data.features[i].geometry.coordinates;
                    var latLng = new google.maps.LatLng(coords[1], coords[0]);

                    var lat_t = parseFloat(latLng.lat());
                    var lng_t = parseFloat(latLng.lng());

                    Array.prototype.forEach.call(markers, function (markerElem) {
                        var point = new google.maps.LatLng(
                            Number(markerElem.getAttribute('lat')),
                            parseFloat(markerElem.getAttribute('lng'))
                        );

                        var lat_p = Number(point.lat());
                        var lng_p = parseFloat(point.lng());

                        if (lat_t == lat_p && lng_t == lng_p) {
                            token = true;
                        }
                    });

                    if (token == false) {
                        var marker = new google.maps.Marker({
                            position: latLng,
                            map: map
                        });
                    }
                }
            });

            /*---------------------------------------------------------------------------------------------*/
          // var temp=route_setup();
          // console.log(temp);

            
             var line;
            // This section is related to the routing from entry to exit

            var submit_button = document.getElementById('getRoute');

            google.maps.event.addDomListener(submit_button, 'click', function () {
                Path = new google.maps.Polyline({
                geodesic: true,
                strokeColor: 'blue',
                strokeOpacity: 1.0,
                strokeWeight: 2
            });
           
              Path.setMap(map);
              var line2=Path.getPath();
              console.log(Path);
                path_temp = route_setup();
              //  console.log(path_temp);


                for (var i = 0; i < path_temp.length; ++i) {
                    var latLng_temp = new google.maps.LatLng(path_temp[i].lat, path_temp[i].lng);
                     line = Path.getPath();
                    line.push(latLng_temp);
                }
               
                console.log(line);
                
                 document.getElementById("Places1").selectedIndex = 0;
                  document.getElementById("Places").selectedIndex = 0;
                console.log(line);
            });
            // console(line.getPath());
        }

        function downloadUrl(url, callback) {
            var request = window.ActiveXObject ?
                new ActiveXObject('Microsoft.XMLHTTP') :
                new XMLHttpRequest;

            // request.onreadystatechange = function() {
            //     if (request.readyState == 4) {
            //         request.onreadystatechange = doNothing;
            //         callback(request, request.status);
            //     }
            // };

            request.open('GET', url, true);
            // request.send(null);
        }

        function doNothing() { }
    </script>

</body>

</html>
